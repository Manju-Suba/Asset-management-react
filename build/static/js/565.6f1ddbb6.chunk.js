"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[565],{83565:(e,s,t)=>{t.r(s),t.d(s,{default:()=>D});var a=t(48089),o=t(9950),l=t(45259),r=t(65059),n=t(44290),i=t(83239),c=t(25333),d=t(19808),h=t(33306),x=t(47435),u=t(54957),p=t(87426),g=t(28429),f=t(809),A=t(32203),m=t(23652),b=t(36853),j=t(91285),S=t(82569),C=t(60899),I=t(72578),y=t(29606),v=t(69267),w=t(90008),O=(t(20236),t(44414));const z=()=>{const e=(0,S.wA)(),s=(0,g.zy)(),[t,a]=(0,o.useState)(null),z=(0,o.useRef)(!1),N=(0,o.useRef)(""),[D,W]=(0,o.useState)(),[k,L]=(0,o.useState)(10),P=new URLSearchParams(s.search).get("class"),E=(0,S.d4)((e=>e.AssetListData&&e.AssetListData.AllAssetList)),_=(0,S.d4)((e=>e.AssetListData&&e.AssetListData.AllAssetList&&e.AssetListData.AllAssetList.assetsCount)),[R,F]=(0,o.useState)(P||"Choose Asset Class"),[q,T]=(0,o.useState)("Asset Status"),[B,G]=(0,o.useState)(!1),{SCRAPPED:M,ONLINE:U,OFFLINE:V}=I.Kc,[H,J]=(0,o.useState)({latitude:null,longitude:null}),K=(0,S.d4)((e=>e.AssetClassData&&e.AssetClassData.AssetClassData)),[Q,X]=o.useState("Choose Asset Class"),Y=async(s,t)=>{G(!0);try{const a=(new AbortController).signal,o=s-1;await e((0,m.qO)(R,null,q,o,t,z.current,N.current,a))}catch(a){G(!1),console.error("Error fetching data:",a)}finally{G(!1)}},Z=(null===E||void 0===E?void 0:E.assets)||[],$=Z.map(((e,s)=>{let t;return t=0==D?D:void 0==D?0:D-1,{...e,sno:t*k+s+1}}));const ee=[{title:(0,O.jsx)("span",{className:"table-hd-fs",children:"SI.No"}),dataIndex:"sno",key:"sno",sorter:{compare:(e,s)=>e.sno-s.sno,multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,O.jsx)(p.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,O.jsx)(u.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,O.jsx)("span",{className:"table-hd-fs",children:"Picture"}),dataIndex:"assetId",key:"assetId",render:(e,s)=>s.pictureWithPath?(0,O.jsx)(l.A,{size:"middle",children:(0,O.jsx)("img",{src:s.pictureWithPath,alt:"Previous",style:{width:"30px",height:"27px"}})}):(0,O.jsx)(l.A,{size:"middle",children:(0,O.jsx)("img",{src:A,alt:A,style:{width:"30px",height:"27px"}})})},{dataIndex:"assetId",key:"assetId",title:(0,O.jsx)("span",{className:"table-hd-fs",children:"Asset Id."}),sorter:{compare:(e,s)=>e.assetId.localeCompare(s.assetId),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,O.jsx)(p.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,O.jsx)(u.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{dataIndex:"childId",key:"childId",title:(0,O.jsx)("span",{className:"table-hd-fs",children:"Child Id"}),sorter:(e,s)=>e.childId&&s.childId?e.childId.localeCompare(s.childId):0,sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,O.jsx)(p.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,O.jsx)(u.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,O.jsx)("span",{className:"table-hd-fs",children:"Asset Class"}),dataIndex:"assetClass",key:"assetClass",sorter:{compare:(e,s)=>e.assetClass.localeCompare(s.assetClass),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,O.jsx)(p.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,O.jsx)(u.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,O.jsx)("span",{className:"table-hd-fs",children:"Asset Description"}),dataIndex:"description",key:"description",sorter:{compare:(e,s)=>e.description.localeCompare(s.description),multiple:1},render:(e,s)=>(0,O.jsx)(r.A,{content:s.description,title:"Asset Description",trigger:s.description.length>10?"hover":"",children:s.description.length>10?"".concat(s.description.slice(0,10),"..."):s.description}),sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,O.jsx)(p.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,O.jsx)(u.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,O.jsx)("span",{className:"table-hd-fs",children:"Asset Status"}),dataIndex:"assetStatus",key:"assetStatus",render:(e,s)=>{let t="";switch(s.assetStatus){case M:t="table-value-badge-danger";break;case V:t="table-value-badge-warning";break;case U:t="table-value-badge-success";break;default:t="table-value-badge"}return(0,O.jsx)("span",{className:t,children:s.assetStatus})},sorter:{compare:(e,s)=>e.assetStatus.localeCompare(s.assetStatus),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,O.jsx)(p.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,O.jsx)(u.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,O.jsx)("span",{className:"table-hd-fs",children:"Asset Life Time"}),dataIndex:"assetLifetime",key:"assetLifetime",sorter:{compare:(e,s)=>e.assetLifetime.localeCompare(s.assetLifetime),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,O.jsx)(p.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,O.jsx)(u.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,O.jsx)("span",{className:"table-hd-fs",children:"Cost Of Asset"}),dataIndex:"costOfAsset",key:"costOfAsset",sorter:{compare:(e,s)=>e.costOfAsset.localeCompare(s.costOfAsset),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,O.jsx)(p.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,O.jsx)(u.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,O.jsx)("span",{className:"table-hd-fs",children:"Action"}),key:"action",render:()=>(0,O.jsx)(l.A,{children:(0,O.jsx)(C.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,O.jsx)(v.A,{sx:{fontSize:"16px"}})})})}],se=e=>{a(e)};return o.useEffect((()=>{e((0,b.qJ)()),"geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{J({latitude:e.coords.latitude,longitude:e.coords.longitude})}),(e=>{e.code===e.PERMISSION_DENIED?toast.error("Please give access for location."):console.error("Error getting geolocation:",e.message)}),{enableHighAccuracy:!0}):console.log("Geolocation is not available in your browser."),Y(D,k)}),[e,D,k]),(0,O.jsx)(O.Fragment,{children:t?(0,O.jsx)(w.A,{onRowClick:se,selectedData:t,positionGeo:H,selectedCategory:Q,selectedAssetType:q,table:t.availableStatus,pageNo:D}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(d.A,{maxWidth:"xl",sx:{height:"auto",width:"100%",bgcolor:"#fff",mt:.5,border:"none",mr:0},children:(0,O.jsx)(i.A,{disableGutters:!0,sx:{height:"50%"},children:(0,O.jsxs)(C.Ay,{item:!0,container:!0,spacing:2,columns:16,children:[(0,O.jsx)(C.Ay,{item:!0,lg:3,sm:5,children:(0,O.jsx)(h.A,{name:"asset",type:"text",placeholder:"search ",className:"search-input-bg",sx:{border:"none"},InputProps:{style:{width:"100%",height:"33px",color:"#C7C7C7",bgcolor:"#FBFBFB"},startAdornment:(0,O.jsx)(c.A,{"aria-label":"Toggle password visibility",edge:"start",children:(0,O.jsx)(x.A,{sx:{color:"#C7C7C7",fontSize:"18px",fontWeight:"700"}})})},value:N.current,onChange:e=>{N.current=e.target.value,""!=e.target.value?z.current=!0:z.current=!1,W(1),Y(1,k)}})}),(0,O.jsx)(C.Ay,{item:!0,lg:2,sm:4,sx:{ml:1},className:"select-ant-cus",children:(0,O.jsx)(y.A,{defaultValue:P||"Asset Class",style:{width:"100%",height:"33px"},showSearch:!0,onChange:async s=>{F(s),X(s),e((0,j.U)(s)),G(!0);try{const t=(new AbortController).signal;W(1),await e((0,m.qO)(s,null,q,0,k,z.current,N.current,t))}catch(t){G(!1),console.error("Error fetching data:",t)}finally{G(!1)}},options:[{value:"",label:"Asset Class"},...K.map((e=>({value:e.assetClass,label:e.assetClass})))]})}),(0,O.jsx)(C.Ay,{item:!0,lg:2,sm:4,sx:{ml:1},className:"select-ant-cus",children:(0,O.jsx)(y.A,{defaultValue:"Asset Status",value:q,style:{width:"100%",height:"33px"},showSearch:!0,onChange:async s=>{T(s),G(!0);try{const t=(new AbortController).signal;W(1),await e((0,m.qO)(R,null,s,0,k,z.current,N.current,t))}catch(t){G(!1),console.error("Error fetching data:",t)}finally{G(!1)}},options:[{value:"",label:"Asset Status"},...[{value:"Online",label:"Online"},{value:"Offline",label:"Offline"},{value:"Maintenance",label:"Maintenance"}].map((e=>({value:e.value,label:e.label})))]})})]})})}),(0,O.jsx)(n.A,{className:"table-hd",columns:ee,dataSource:$,pagination:!1,loading:B,showSorterTooltip:!1,onRow:e=>({onClick:()=>se(e)})}),(0,O.jsx)("div",{className:"align-center-data",children:(0,O.jsx)(f.A,{defaultCurrent:D,total:_,current:D,pageSize:k,onChange:(e,s)=>{W(e),L(s),Y(e,s)},hideOnSinglePage:!0})})]})})};var N=t(96032);const D=()=>(0,O.jsx)(N.A,{children:(0,O.jsx)(a.A,{sx:{height:"100%",width:"100%",overflow:"auto",boxShadow:"none",borderRadius:"10px"},children:(0,O.jsx)(z,{})})})}}]);