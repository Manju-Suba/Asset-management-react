"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[526],{50581:(e,s,t)=>{t.d(s,{WA:()=>n});var a=t(65629),l=t(3680);const n=e=>s=>{l.A.get("/asset-class/get-all",{signal:e,headers:{"Content-Type":"application/json"}}).then((e=>{s({type:a.pM,payload:e.data.data})})).catch((e=>{console.log("error",e)}))}},69326:(e,s,t)=>{t.d(s,{A:()=>w});var a=t(9950),l=t(83511),n=t(41388),i=t(93124),r=t(47972),o=t(45259),d=t(59159),c=t(10495),x=t(74763),h=t(82569),m=t(85923),u=t(96965),p=t(59949),A=t(6940),g=t(83791),b=t(32921),j=t(10866),f=t(78433),y=t(65884),C=t(60899),v=t(32203),I=t(44414);const w=e=>{let{AssetData:s,StatusType:t,Status:w,isModalOpen:N,setIsModalOpen:S}=e;const k=(0,h.wA)(),[D,O]=(0,a.useState)(N),[R,z]=(0,a.useState)(!1),[E,F]=(0,a.useState)(null),[P]=l.A.useForm(),[V,B]=a.useState(null),[W,L]=a.useState(!1),[T,M]=a.useState(!1),[Y,q]=a.useState(!1),U=()=>{F(null),P.setFieldsValue({assetImage:null})};function Z(e){return e*(Math.PI/180)}const G=async()=>{const e=await new Promise(((e,s)=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition((s=>{e(s.coords)}),(e=>{e.code===e.PERMISSION_DENIED?s("Please give access for location."):s("Error getting geolocation:",e.message)})):console.log("Geolocation is not available in your browser.")})),{latitude:s,longitude:t}=e;return{latitude:s,longitude:t}};return(0,a.useEffect)((()=>{O(N);(async()=>{if(s){const{latitude:e,longitude:a}=await G(),l=await async function(e,s,t,a){const l=Z(e),n=Z(t),i=Z(t-e),r=Z(a-s),o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(l)*Math.cos(n)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371e3}(parseFloat(s.latitudeAndLongitude.split("/")[0]),parseFloat(s.latitudeAndLongitude.split("/")[1]),e,a);"Reject"==t||l<200?(L(!1),M(!1)):(L(!0),M(!0));const n=parseFloat(l.toFixed(2));B(n),(async(e,s,t,a)=>{let l=["",""];null!=t.latitudeAndLongitude&&(l=t.latitudeAndLongitude.split("/"));a.resetFields(),a.setFieldsValue({assetId:t.assetId,previousLatLong:"".concat(l[1]," | ").concat(l[0]),currentLatLong:"".concat(s," | ").concat(e)})})(e,a,s,P)}})()}),[s,N]),(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(n.A,{title:"Do you want to "+t+"?",open:D,okText:"Save",okButtonProps:{disabled:W},onOk:async()=>{z(!0),P.validateFields().then((e=>{const t=new FormData;t.append("assetId",e.assetId),t.append("remark",e.remarks),t.append("status",w),t.append("id",s.assetId),t.append("withCondition",Y),void 0!=e.assetImage&&t.append("file",e.assetImage.originFileObj),k((0,u.K8)(t)).then((e=>{m.oR.success(e.data.message);const s=(new AbortController).signal;k((0,u.dN)(0,10,null,null,!1,null,s)),P.resetFields(),F(null),O(!1),z(!1)})).catch((e=>{m.oR.error(e.response.data.message),z(!1)}))})).catch((e=>{console.log(e),z(!1),m.oR.error("Validation error",e)}))},confirmLoading:R,onCancel:()=>{P.resetFields(),S(!1),O(!1),z(!1),F(null)},width:600,className:"text-arul",sx:{height:"100%",width:"100% ",fontWeight:"700",fontSize:"24px",color:"#161C24"},children:[(0,I.jsx)(x.A,{}),(0,I.jsxs)(l.A,{form:P,encType:"multipart/form-data",children:[(0,I.jsx)(l.A.Item,{label:"  Asset Id",name:"assetId",labelAlign:"top",labelCol:{span:24},sx:{width:"100%",height:"40px"},rules:[{required:!0,message:"This field is required"}],children:(0,I.jsx)(i.A,{placeholder:"Enter Asset Id",style:{height:"40px"},readOnly:!0})}),(0,I.jsxs)(C.Ay,{container:!0,spacing:2,columns:16,children:[(0,I.jsxs)(C.Ay,{item:!0,lg:8,sm:8,children:[(0,I.jsx)(l.A.Item,{label:(0,I.jsx)("span",{className:"label-style",children:"Previous Image"}),name:"previousassetImage",className:"margin-bottom-0px",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"}}),null!==s&&void 0!==s&&s.previewImageWithPath?(0,I.jsx)("div",{children:(0,I.jsx)(r.A,{src:s.previewImageWithPath,alt:"Asset",style:{width:"100.17px",height:"100.17px",borderRadius:"8px"},preview:{toolbarRender:(e,s)=>{let{transform:{scale:t},actions:{onFlipY:a,onFlipX:l,onRotateLeft:n,onRotateRight:i,onZoomOut:r,onZoomIn:d}}=s;return(0,I.jsxs)(o.A,{size:12,className:"toolbar-wrapper",children:[(0,I.jsx)(p.A,{rotate:90,onClick:a}),(0,I.jsx)(p.A,{onClick:l}),(0,I.jsx)(A.A,{onClick:n}),(0,I.jsx)(g.A,{onClick:i}),(0,I.jsx)(b.A,{disabled:1===t,onClick:r}),(0,I.jsx)(j.A,{disabled:50===t,onClick:d})]})}}})}):(0,I.jsx)("div",{children:(0,I.jsx)(r.A,{src:v,alt:"Asset",style:{width:"100.17px",height:"100.17px",borderRadius:"8px"},preview:{toolbarRender:(e,s)=>{let{transform:{scale:t},actions:{onFlipY:a,onFlipX:l,onRotateLeft:n,onRotateRight:i,onZoomOut:r,onZoomIn:d}}=s;return(0,I.jsxs)(o.A,{size:12,className:"toolbar-wrapper",children:[(0,I.jsx)(p.A,{rotate:90,onClick:a}),(0,I.jsx)(p.A,{onClick:l}),(0,I.jsx)(A.A,{onClick:n}),(0,I.jsx)(g.A,{onClick:i}),(0,I.jsx)(b.A,{disabled:1===t,onClick:r}),(0,I.jsx)(j.A,{disabled:50===t,onClick:d})]})}}})})]}),(0,I.jsxs)(C.Ay,{item:!0,lg:8,sm:8,children:[(0,I.jsx)(l.A.Item,{label:(0,I.jsx)("span",{className:"label-style",children:"Current Image"}),name:"assetImage",className:"margin-bottom-0px",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"}}),E?(0,I.jsx)("div",{children:(0,I.jsx)(r.A,{src:E,alt:"Asset",style:{width:"100.17px",height:"100.17px",borderRadius:"8px"},preview:{toolbarRender:(e,s)=>{let{transform:{scale:t},actions:{onFlipY:a,onFlipX:l,onRotateLeft:n,onRotateRight:i,onZoomOut:r,onZoomIn:d}}=s;return(0,I.jsxs)(o.A,{size:12,className:"toolbar-wrapper",children:[(0,I.jsx)(p.A,{rotate:90,onClick:a}),(0,I.jsx)(p.A,{onClick:l}),(0,I.jsx)(A.A,{onClick:n}),(0,I.jsx)(g.A,{onClick:i}),(0,I.jsx)(b.A,{disabled:1===t,onClick:r}),(0,I.jsx)(j.A,{disabled:50===t,onClick:d}),(0,I.jsx)(f.A,{onClick:U})]})}}})}):(0,I.jsx)(d.A,{listType:"picture-card",showUploadList:!1,beforeUpload:e=>{if(!e.type.startsWith("image/"))return m.oR.error("".concat(e.name," is not an image file")),!1;const s=new FileReader;return s.readAsDataURL(e),s.onload=()=>{F(s.result)},!1},maxCount:1,onChange:e=>{P.setFieldsValue({assetImage:e.fileList[0]}),"removed"===e.file.status?F(null):"done"===e.file.status&&F(e.file.response.imageUrl)},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},rules:E?[{required:!0,message:"This field is required"}]:"",children:(0,I.jsxs)("div",{children:[(0,I.jsx)(y.A,{fontSize:"large"}),(0,I.jsx)("div",{style:{marginTop:8},children:"Change Picture"})]})})]})]}),(0,I.jsxs)(C.Ay,{container:!0,spacing:2,columns:16,children:[(0,I.jsx)(C.Ay,{item:!0,lg:8,sm:8,children:(0,I.jsx)(l.A.Item,{label:"Previous Longitude & Latitude",name:"previousLatLong",labelAlign:"top",labelCol:{span:24},sx:{width:"100%"},children:(0,I.jsx)(i.A,{style:{height:"50px",verticalAlign:"top",textAlign:"left"},readOnly:!0})})}),(0,I.jsx)(C.Ay,{item:!0,lg:8,sm:8,children:(0,I.jsx)(l.A.Item,{label:"Current Longitude & Latitude",name:"currentLatLong",labelAlign:"top",labelCol:{span:24},sx:{width:"100%"},children:(0,I.jsx)(i.A,{style:{height:"50px",verticalAlign:"top",textAlign:"left"},readOnly:!0})})})]}),(0,I.jsx)(C.Ay,{container:!0,spacing:2,columns:16,children:(0,I.jsx)(C.Ay,{item:!0,lg:8,sm:8,children:V<200?(0,I.jsx)(l.A.Item,{label:(0,I.jsxs)("span",{style:{color:"#19CC24"},children:[V," m"]}),name:"note",labelAlign:"top",labelCol:{span:24},sx:{width:"100%"},style:{color:"#19CC24"}}):(0,I.jsx)(l.A.Item,{label:(0,I.jsxs)("span",{style:{color:"#ED2E22"},children:["*",V," m"]}),name:"note",labelAlign:"top",labelCol:{span:24},sx:{width:"100%"},style:{color:"#ED2E22"}})})}),(0,I.jsx)(l.A.Item,{label:"Remarks",name:"remarks",labelAlign:"top",labelCol:{span:24},sx:{width:"100%"},rules:[{required:!0,message:"This field is required"}],children:(0,I.jsx)(i.A,{placeholder:"Enter Remarks",style:{height:"100px",verticalAlign:"top",textAlign:"left"}})}),T?(0,I.jsx)(l.A.Item,{name:"withCondition",labelAlign:"top",labelCol:{span:24},sx:{width:"100%"},children:(0,I.jsxs)(c.A,{checked:Y,onChange:e=>{q(e.target.checked),1==e.target.checked?L(!1):L(!0)},children:[" ","With Condition"," "]})}):(0,I.jsx)(I.Fragment,{})]})]})})}},19526:(e,s,t)=>{t.r(s),t.d(s,{default:()=>he});var a=t(9950),l=t(48089),n=t(16491),i=t(87094),r=t(41988),o=t(10226),d=t(83511),c=t(93124),x=t(69326),h=t(82569),m=t(45452),u=t(44414);function p(){const[e,s]=a.useState(),[t,l]=a.useState([]),[p,A]=a.useState(),[g,b]=a.useState(),[j,f]=a.useState(!1),[y,C]=a.useState(""),v=(0,h.wA)(),[I]=d.A.useForm(),w=t=>{e?(C(""),I.setFieldsValue({assetId:""}),v((0,m.D9)(e)).then((e=>{l(e.data.data),A("Approved"===t?"Approve":"Reject"),s(null),I.resetFields(),b(t),f(!0)})).catch((e=>{C("Invalid asset id"),l([]),console.log("error",e)}))):C("This field is required")};return(0,u.jsx)(n.A,{sx:{width:"100%"},children:(0,u.jsxs)(n.A,{className:"box-profile",children:[(0,u.jsx)(d.A,{className:"profile-form",encType:"multipart/form-data",form:I,children:(0,u.jsxs)(i.A,{children:[(0,u.jsx)(r.A,{span:8,children:(0,u.jsxs)(d.A.Item,{label:"Asset ID",name:"assetId",labelAlign:"top",labelCol:{span:24},onChange:e=>{s(e.target.value)},rules:[{required:!0,message:"This field is required"}],children:[(0,u.jsx)(c.A,{placeholder:"Enter Asset ID",style:{height:"40px"}}),y&&(0,u.jsx)("span",{className:"error-message",children:y})]})}),(0,u.jsx)(r.A,{span:8}),(0,u.jsx)(r.A,{span:8,className:"margin-auto mui-text-center",children:(0,u.jsxs)("div",{className:"mui-justify-center",children:[(0,u.jsx)(o.A,{className:"btn-profile-cancel text-reject",onClick:()=>w("Rejected"),children:"Reject"}),(0,u.jsx)(o.A,{className:"btn-profile-submit text-approve",onClick:()=>w("Approved"),children:"Approve"})]})})]})}),(0,u.jsx)(x.A,{AssetData:t,StatusType:p,Status:g,isModalOpen:j,setIsModalOpen:f})]})})}var A=t(18437),g=t(84142),b=t(82053),j=t(10495),f=t(45259),y=t(44290),C=t(83239),v=t(97497),I=t(25333),w=t(19808),N=t(33306),S=t(99386),k=t(47435),D=t(87899),O=t(7762),R=t(83274),z=t(54957),E=t(87426),F=t(96965),P=t(50581),V=t(60899),B=t(809),W=t(4159),L=t.n(W);const T=()=>{const e=(0,h.wA)(),[s,t]=a.useState(!1),[l,n]=a.useState([]),i=(0,a.useRef)(!1),[r,d]=(0,a.useState)(),[c,x]=(0,a.useState)(10),[m,p]=(0,a.useState)(!1),A=(0,a.useRef)(!1),g=(0,a.useRef)(""),W=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.AssetAuditByStatus)),T=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.AssetAuditByStatus&&e.AssetAuditData.AssetAuditByStatus.auditStatusCounts)),[M,Y]=(0,a.useState)("Choose Asset Category"),q=(0,h.d4)((e=>e.AssetCateData&&e.AssetCateData.AssetCategoryData)),U="Approved",[Z,G]=(0,a.useState)(),X=(e,s)=>{Z?G():G(s)},Q=async(s,t)=>{p(!0);try{const a=(new AbortController).signal,l=s-1;await e((0,F.NZ)(l,t,A.current,g.current,U,M,a))}catch(a){p(!1),console.error("Error fetching data:",a)}finally{p(!1)}},K=[{title:(0,u.jsx)(j.A,{onChange:e=>{const s=e.target.checked;t(s);const a=s?[...W]:[];n(a)},checked:s}),dataIndex:"checkbox",key:"checkbox",render:(e,s)=>(0,u.jsx)(j.A,{onChange:e=>((e,s)=>{const a=[...l];if(e.target.checked)a.push(s);else{const e=a.findIndex((e=>e.id===s.id));-1!==e&&a.splice(e,1)}n(a),t(a.length===W.length)})(e,s),checked:l.some((e=>e.id===s.id))},s.key)},{dataIndex:"sno",key:"sno",title:(0,u.jsx)("span",{className:"table-hd-fs",children:"SI.No"}),sorter:{compare:(e,s)=>e.sno-s.sno,multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{dataIndex:"assetId",key:"assetId",title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Asset No"}),render:(e,s)=>s.assetId||"",sorter:{compare:(e,s)=>e.assetId.localeCompare(s.assetId),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Asset Class"}),dataIndex:"assetClass",key:"assetClass",render:(e,s)=>s.assetClass||"",sorter:{compare:(e,s)=>e.assetClass.localeCompare(s.assetClass),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Plant"}),key:"plant",dataIndex:"plant",render:(e,s)=>s.plant||"",sorter:{compare:(e,s)=>e.plant.localeCompare(s.plant),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Previous Image "}),dataIndex:"name",key:"name",render:(e,s)=>(0,u.jsx)(f.A,{size:"middle",children:(0,u.jsx)("img",{src:(null===s||void 0===s?void 0:s.previewImageWithPath)||"",alt:"Previous",style:{width:"30px"}})})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Current Image "}),dataIndex:"name",key:"name",render:(e,s)=>(0,u.jsx)(f.A,{size:"middle",children:(0,u.jsx)("img",{src:(null===s||void 0===s?void 0:s.currentImageWithPath)||"",alt:"Current",style:{width:"30px"}})})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Audit Date"}),dataIndex:"date",key:"date",condition:!0,render:(e,s)=>L()(s.date).format("DD MMM YYYY"),sorter:{compare:(e,s)=>L()(e.date).isBefore(L()(s.date))?-1:1,multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Status"}),dataIndex:"status",key:"status",render:(e,s)=>(0,u.jsx)(o.A,{className:"btn-status-approved",color:"success",children:null===s||void 0===s?void 0:s.status}),sorter:{compare:(e,s)=>e.status.localeCompare(s.status),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Remarks"}),key:"action",render:(e,s)=>{return t=null===s||void 0===s?void 0:s.remark,a=s.id,t?t.length<=10?t:(0,u.jsxs)(u.Fragment,{children:[Z==a?t:"".concat(t.slice(0,10),"... "),(0,u.jsx)("span",{role:"button",tabIndex:"0",className:"read-more-btn",onClick:e=>X(0,a),onKeyDown:e=>{"Enter"===e.key&&X()},children:Z==a?" Read less":" Read more"})]}):null;var t,a}}],H=(null===W||void 0===W?void 0:W.auditsData)||[],J=H.map(((e,s)=>{let t;return t=0==r?r:void 0==r?0:r-1,{...e,sno:t*c+s+1}}));return a.useEffect((()=>(i.current||(e((0,P.WA)()),Q(r,c)),()=>{i.current=!0})),[e,U,M,r,c]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(w.A,{maxWidth:"xl",sx:{height:"100%",width:"100%",bgcolor:"#fff",mt:.5,border:"none",mr:0},children:(0,u.jsxs)(C.A,{disableGutters:!0,sx:{height:"50%",pl:{sm:2},pr:{xs:1,sm:1},...l.length>0&&{bgcolor:e=>(0,v.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[l.length>0?(0,u.jsxs)(b.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[l.length," selected"]}):(0,u.jsxs)(V.Ay,{container:!0,spacing:2,columns:16,children:[(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,children:(0,u.jsx)(N.A,{name:"asset",type:"text",placeholder:"search ",sx:{border:"none"},InputProps:{style:{width:"100%",height:"33px",color:"#C7C7C7",bgcolor:"#FBFBFB"},startAdornment:(0,u.jsx)(I.A,{"aria-label":"Toggle password visibility",edge:"start",children:(0,u.jsx)(k.A,{sx:{color:"#C7C7C7",fontSize:"18px",fontWeight:"700"}})})},value:g.current,onChange:e=>{g.current=e.target.value,""!=e.target.value?A.current=!0:A.current=!1,d(1),Q(1,c)}})}),(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,sx:{ml:1},className:"select-ant-cus",children:(0,u.jsx)(S.A,{defaultValue:"Asset Category",style:{width:"100%",height:"33px"},showSearch:!0,onChange:async s=>{Y(s),p(!0),d(1);try{const t=(new AbortController).signal;await e((0,F.NZ)(1,c,A.current,g.current,U,s,t))}catch(t){p(!1),console.error("Error fetching data:",t)}finally{p(!1)}},options:[{value:"Choose Asset Category",label:"Asset Class"},...q.map((e=>({value:e.assetClass,label:e.assetClass})))]})}),(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,sx:{ml:1},className:"select-ant-cus"}),(0,u.jsx)(V.Ay,{item:!0,lg:6,sm:4})]}),l.length>0&&(0,u.jsx)(R.A,{title:"Delete",children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"success",size:"small",className:"w-unset btn-approve",children:(0,u.jsx)(D.A,{sx:{fontSize:"16px"}})})}),(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"error",size:"small",className:"w-unset btn-reject",children:(0,u.jsx)(O.A,{sx:{fontSize:"16px"}})})})]})})]})}),(0,u.jsx)(y.A,{className:"table-hd",columns:K,dataSource:J,pagination:!1,loading:m,showSorterTooltip:!1}),(0,u.jsx)("div",{className:"align-center-data",children:(0,u.jsx)(B.A,{defaultCurrent:r,current:r,total:T,pageSize:c,onChange:(e,s)=>{d(e),x(s),Q(e,s,A.current,g.current)},hideOnSinglePage:!0})})]})};var M=t(32203);var Y=t(41388),q=t(74763),U=t(85923);const Z=e=>{let{AssetData:s,isModalOpen:t,setIsModalOpen:l}=e;const n=(0,h.wA)(),[i,r]=(0,a.useState)(t),[o,x]=(0,a.useState)(!1),[m]=d.A.useForm();return(0,a.useEffect)((()=>{r(t),s&&(m.resetFields(),m.setFieldsValue({assetId:s.assetId}))}),[s,n,m,t]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(Y.A,{title:"Observation Remarks ",open:i,okText:"Submit",onOk:async()=>{x(!0),m.validateFields().then((e=>{const t=new FormData;t.append("assetId",e.assetId),t.append("remarks",e.remarks),t.append("observationDate",s.nextAuditDate),t.append("id",s.id),n((0,F.rY)(t)).then((e=>{U.oR.success(e.data.message),n((0,F.dN)(0,10)),m.resetFields(),r(!1),x(!1)})).catch((e=>{U.oR.error(e.response.data.message),x(!1)}))})).catch((e=>{console.log(e),x(!1),U.oR.error("Validation error",e)}))},confirmLoading:o,onCancel:()=>{m.resetFields(),l(!1),r(!1),x(!1)},width:600,className:"text-arul",sx:{height:"100%",width:"100% ",fontWeight:"700",fontSize:"24px",color:"#161C24"},children:[(0,u.jsx)(q.A,{}),(0,u.jsxs)(d.A,{form:m,children:[(0,u.jsx)(d.A.Item,{label:"  Asset Id",name:"assetId",labelAlign:"top",labelCol:{span:24},sx:{width:"100%",height:"40px"},rules:[{required:!0,message:"This field is required"}],children:(0,u.jsx)(c.A,{placeholder:"Enter Asset Id",style:{height:"40px"},readOnly:!0})}),(0,u.jsx)(d.A.Item,{label:"  Remarks",name:"remarks",labelAlign:"top",labelCol:{span:24},sx:{width:"100%"},children:(0,u.jsx)(c.A,{placeholder:"Enter Remarks",style:{height:"100px",verticalAlign:"top",textAlign:"left"}})})]})]})})};var G=t(63189),X=t(3434),Q=t(47972),K=t(59949),H=t(6940),J=t(83791),_=t(32921),$=t(10866),ee=t(78433),se=t(53872),te=(t(47705),t(91601));const ae=e=>{let{selectedAsset:s,geoLocation:t}=e;const l=(0,h.wA)(),[i]=d.A.useForm(),r=(0,h.d4)((e=>e.AssetData&&e.AssetData.AssetDetailsAudit)),o=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.CheckListByAssetClass)),[x,p]=a.useState(null);(0,a.useEffect)((()=>{l((0,m.N$)(s.id,s.companyId,s.plant,s.assetClass))}),[l,s.id,s.companyId,s.plant,s.assetClass]),(0,a.useEffect)((()=>{l((0,F.IN)(s.assetClass))}),[l,s.assetClass]),(0,a.useEffect)((()=>{l((0,F.Kf)(s.assetId,s.plant,s.companyId))}),[l]);const A=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.ChildIdAudit)),{RangePicker:g}=X.A,b="YYYY/MM/DD",j=L()(),y=null!==r&&void 0!==r&&r.assetAgeingTo?L()(null===r||void 0===r?void 0:r.assetAgeingTo,b):L()(j,b),C=null!==r&&void 0!==r&&r.assetAgeingFrom?L()(null===r||void 0===r?void 0:r.assetAgeingFrom,b):null,{protocol:v,host:I}=window.location,w="".concat(v,"//").concat(I),N="".concat(w,"/#/asset-audit-qr-details/").concat(s.id,"/").concat(s.companyId,"/").concat(s.plant,"/").concat(s.assetClass);function k(e){return e*(Math.PI/180)}(0,a.useEffect)((()=>{if(r){const{assetId:e,latitudeAndLongitude:s,costClassWise:t,assetClass:a,plant:l,serialNumber:n,assetStatus:o,assetAgeingFrom:d,assetLifetime:c,requiresAttention:x,upOrDowntime:h,warrantyStatus:m,noOfRoutinesExecuted:u,costOfAsset:p,estimatedSalvageValue:A,usefulLife:g,netProfitOrBenefit:j,costOfInvestment:f,totalBenefit:v,totalCost:I,revenueGenerated:w,beginningTotalAsset:N,endingTotalAsset:S,netIncome:k,returnOfInvestment:D,netBenefit:O,assetUtilization:R,returnOfAsset:z,expiryDate:E,description:F,costCenter:P,capitalizationDate:V,assetRetirementDate:B}=r;i.setFieldsValue({assetQrCode:e,latitudeAndLongitude:s,assetId:e,costClassWise:t,assetClass:a,plant:l,serialNumber:n,assetStatus:o,assetAgeing:d?[C,y]:null,assetLifetime:c,requiresAttention:x,upOrDowntime:h,warrantyStatus:m,noOfRoutinesExecuted:u,costOfAsset:p,estimatedSalvageValue:A,usefulLife:g,netProfitOrBenefit:j,costOfInvestment:f,totalBenefit:v,totalCost:I,revenueGenerated:w,beginningTotalAsset:N,endingTotalAsset:S,netIncome:k,depreciation:(Number(p)-Number(A))/Number(g),returnOfInvestment:D,netBenefit:O,assetUtilization:R,averageTotalAsset:(Number(N)+Number(S))/2,returnOfAsset:z,expiryDate:E?L()(E,b):null,description:F,costCenter:P,capitalizationDate:V?L()(V,b):null,assetRetirementDate:B?L()(B,b):null})}if(latitudeAndLongitude){var e,s;const a=function(e,s,t,a){const l=k(e),n=k(t),i=k(t-e),r=k(a-s),o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(l)*Math.cos(n)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371e3}(null===r||void 0===r||null===(e=r.latitudeAndLongitude)||void 0===e?void 0:e.split("/")[0],null===r||void 0===r||null===(s=r.latitudeAndLongitude)||void 0===s?void 0:s.split("/")[1],null===t||void 0===t?void 0:t.latitude,null===t||void 0===t?void 0:t.longitude),l=parseFloat(a.toFixed(2));p(l)}}),[r,i]);function D(e){return new Date(e).toISOString().split("T")[0]}return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(n.A,{children:(0,u.jsx)(d.A,{onFinish:()=>{"null/null"!=i.getFieldValue("latitudeAndLongitude")?i.validateFields().then((e=>{const t=new FormData;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];"expiryDate"===s&&a?t.append(s,D(a)):a&&t.append(s,a)}t.append("assetAgeingFrom",D(e.assetAgeing[0])),t.append("assetAgeingTo",D(e.assetAgeing[1])),e.assetImage&&t.append("imageUpload",e.assetImage.originFileObj),t.append("id",s.id),handleViewAction(),l((0,m.fO)(t)).then((e=>{U.oR.success(e.data.message),l((0,m.TX)(tableRefresh,selectedCategory,selectedAssetType))})).catch((e=>{U.oR.error(e.response.data.message)}))})).catch((e=>{console.log("Validation failed:",e)})):U.oR.error("Please give access for location.")},form:i,initialValues:i.getFieldsValue(),children:(0,u.jsxs)(V.Ay,{item:!0,sx:{ml:3.6,mr:3.6},children:[(0,u.jsxs)(V.Ay,{container:!0,spacing:2,columns:19,children:[(0,u.jsx)(V.Ay,{item:!0,container:!0,children:(0,u.jsx)("h3",{children:"Asset Details"})}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Asset Previous Image"}),name:"assetImage",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"}}),r.pictureWithPath?(0,u.jsx)("div",{children:(0,u.jsx)(Q.A,{src:r.pictureWithPath,alt:"Asset",style:{width:"100.17px",height:"100.17px",borderRadius:"8px"},disabled:!0,preview:{toolbarRender:(e,s)=>{let{transform:{scale:t},actions:{onFlipY:a,onFlipX:l,onRotateLeft:n,onRotateRight:i,onZoomOut:r,onZoomIn:o}}=s;return(0,u.jsxs)(f.A,{size:12,className:"toolbar-wrapper",children:[(0,u.jsx)(K.A,{rotate:90,onClick:a}),(0,u.jsx)(K.A,{onClick:l}),(0,u.jsx)(H.A,{onClick:n}),(0,u.jsx)(J.A,{onClick:i}),(0,u.jsx)(_.A,{disabled:1===t,onClick:r}),(0,u.jsx)($.A,{disabled:50===t,onClick:o})]})}}})}):(0,u.jsx)(Q.A,{src:M,alt:"Asset",style:{width:"100.17px",height:"100.17px",borderRadius:"8px"},disabled:!0,preview:{toolbarRender:(e,s)=>{let{transform:{scale:t},actions:{onFlipY:a,onFlipX:l,onRotateLeft:n,onRotateRight:i,onZoomOut:r,onZoomIn:o}}=s;return(0,u.jsxs)(f.A,{size:12,className:"toolbar-wrapper",children:[(0,u.jsx)(K.A,{rotate:90,onClick:a}),(0,u.jsx)(K.A,{onClick:l}),(0,u.jsx)(H.A,{onClick:n}),(0,u.jsx)(J.A,{onClick:i}),(0,u.jsx)(_.A,{disabled:1===t,onClick:r}),(0,u.jsx)($.A,{disabled:50===t,onClick:o}),(0,u.jsx)(ee.A,{onClick:handleCancel})]})}}})]}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Asset QR Code"}),name:"assetQrCode",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"}}),(0,u.jsx)(f.A,{id:"myqrcode",children:(0,u.jsx)(se.Ay,{size:100,style:{height:"auto"},value:N,viewBox:"0 0 100 100"})})]}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,sx:{color:"#919EAB"},children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Previous Longitude & Latitude"}),name:"latitudeAndLongitude",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px",color:"#919EAB"},children:(0,u.jsx)(c.A,{style:{height:"40px"},name:"latitudeAndLongitude",defaultValue:null===r||void 0===r?void 0:r.latitudeAndLongitude,disabled:!0})})}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,sx:{color:"#919EAB"},children:[(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Current Longitude & Latitude"}),name:"latitudeAndLongitudeCurrent",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px",color:"#919EAB"},children:(0,u.jsx)(c.A,{style:{height:"40px"},name:"latitudeAndLongitudeCurrent",defaultValue:"".concat(null===t||void 0===t?void 0:t.latitude,"/").concat(null===t||void 0===t?void 0:t.longitude),disabled:!0})}),x<200?(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{style:{color:"#19CC24"},children:"Below 200m"}),name:"note",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"},style:{color:"#19CC24"}}):(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{style:{color:"#ED2E22"},children:"*Above 200m"}),name:"note",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"},style:{color:"#ED2E22"}})]}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,sx:{color:"#919EAB"},children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Comment"}),name:"comment",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px",color:"#919EAB"},children:(0,u.jsx)(c.A,{style:{height:"40px"},name:"comment"})})})]}),(0,u.jsxs)(V.Ay,{item:!0,container:!0,spacing:2,columns:19,children:[(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Asset ID"}),name:"assetId",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.assetId,disabled:!0,readOnly:!0})})]}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Cost Class wise"}),name:"costClassWise",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.costClassWise,disabled:!0})})}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Asset class"}),name:"assetClass",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.assetClass,disabled:!0,readOnly:!0})})]}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Plant"}),name:"plant",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.plant,disabled:!0,readOnly:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Serial No"}),name:"serialNumber",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.serialNumber,disabled:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Status"}),name:"assetStatus",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"40px"},children:(0,u.jsx)(S.A,{defaultValue:null===r||void 0===r?void 0:r.assetStatus,style:{height:"40px"},showSearch:!0,options:[{value:"Online",label:"Online"},{value:"Offline",label:"Offline"},{value:"Scrapped",label:"Scrapped"},{value:"Maintenance",label:"Maintenance"}],disabled:!0})})})]}),(0,u.jsxs)(V.Ay,{item:!0,container:!0,spacing:2,columns:19,children:[(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Asset Ageing"}),name:"assetAgeing",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(g,{style:{height:"40px",width:"100%"},format:"DD-MM-YYYY",defaultValue:null!==r&&void 0!==r&&r.assetAgeingFrom?[C,y]:null,disabled:!0})})}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Asset Lifetime"}),name:"assetLifetime",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.assetLifetime,disabled:!0,readOnly:!0})})]}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Requires Attention"}),name:"requiresAttention",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.requiresAttention,disabled:!0})})]}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"UP/Downtime"}),name:"upOrDowntime",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.upOrDowntime,disabled:!0,type:"number",className:"no-spinner"})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Warranty Status"}),name:"warrantyStatus",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.warrantyStatus,disabled:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"No of Routines Executed"}),name:"noOfRoutinesExecuted",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.noOfRoutinesExecuted,disabled:!0,type:"number",className:"no-spinner"})})})]}),(0,u.jsxs)(V.Ay,{item:!0,container:!0,spacing:2,columns:19,children:[(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Cost of Asset"}),name:"costOfAsset",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.costOfAsset,type:"number",name:"costOfAsset",className:"no-spinner",disabled:!0,readOnly:!0})})]}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Estimated Salvage Value"}),name:"estimatedSalvageValue",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.estimatedSalvageValue,type:"number",name:"estimatedSalvageValue",className:"no-spinner",disabled:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Useful Life"}),name:"usefulLife",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.usefulLife,disabled:!0,readOnly:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Net Profit or Benefit"}),name:"netProfitOrBenefit",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.netProfitOrBenefit,name:"netProfitOrBenefit",type:"number",className:"no-spinner",disabled:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Cost of Inverstment"}),name:"costOfInvestment",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.costOfInvestment,name:"costOfInvestment",type:"number",className:"no-spinner",disabled:!0,readOnly:!0})})})]}),(0,u.jsxs)(V.Ay,{item:!0,container:!0,spacing:2,columns:19,children:[(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Total Benefit"}),name:"totalBenefit",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.totalBenefit,name:"totalBenefit",type:"number",className:"no-spinner",disabled:!0})})]}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Total Cost"}),name:"totalCost",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.totalCost,name:"totalCost",type:"number",className:"no-spinner",disabled:!0})})]}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Revenue Generated"}),name:"revenueGenerated",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.revenueGenerated,name:"revenueGenerated",type:"number",className:"no-spinner",disabled:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Begining Total Asset"}),name:"beginningTotalAsset",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.beginningTotalAsset,name:"beginningTotalAsset",type:"number",className:"no-spinner",disabled:!0,readOnly:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Ending Total Asset"}),name:"endingTotalAsset",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.endingTotalAsset,name:"endingTotalAsset",type:"number",className:"no-spinner",disabled:!0,readOnly:!0})})}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Net Income"}),name:"netIncome",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.netIncome,name:"netIncome",type:"number",className:"no-spinner",disabled:!0})})]})]}),(0,u.jsxs)(V.Ay,{item:!0,container:!0,spacing:2,columns:19,children:[(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Depreciation"}),name:"depreciation",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:(Number(null===r||void 0===r?void 0:r.costOfAsset)-Number(null===r||void 0===r?void 0:r.estimatedSalvageValue))/Number(null===r||void 0===r?void 0:r.usefulLife),type:"number",name:"depreciation",className:"no-spinner",disabled:!0,readOnly:!0})})]}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Return of Investment"}),name:"returnOfInvestment",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.returnOfInvestment,name:"returnOfInvestment",type:"number",className:"no-spinner",disabled:!0,readOnly:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Net Benefit"}),name:"netBenefit",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.netBenefit,name:"netBenefit",type:"number",className:"no-spinner",disabled:!0,readOnly:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Asset Utilization"}),name:"assetUtilization",labelAlign:"top",labelCol:{span:24},item:!0,sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.assetUtilization,name:"assetUtilization",type:"number",className:"no-spinner",disabled:!0,readOnly:!0})})}),(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Average Total Asset"}),name:"averageTotalAsset",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:(Number(r.beginningTotalAsset)+Number(r.endingTotalAsset))/2,name:"averageTotalAsset",type:"number",className:"no-spinner",disabled:!0,readOnly:!0})})}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Return Of Asset"}),name:"returnOfAsset",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.returnOfAsset,name:"returnOfAsset",type:"number",className:"no-spinner",disabled:!0,readOnly:!0})})]})]}),(0,u.jsxs)(V.Ay,{item:!0,container:!0,spacing:2,columns:19,children:[(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Expired Date"}),name:"expiryDate",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(X.A,{style:{height:"40px",width:"100%"},format:"DD-MM-YYYY",name:"expiryDate",className:"no-spinner",disabled:!0})})]}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Asset Description"}),name:"description",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.description,name:"description",disabled:!0,readOnly:!0})})]}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Cost Center"}),name:"costCenter",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:null===r||void 0===r?void 0:r.returnOfAsset,name:"costCenter",disabled:!0,readOnly:!0})})]}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Capitalization Date"}),name:"capitalizationDate",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(X.A,{style:{height:"40px",width:"100%"},format:"DD-MM-YYYY",name:"capitalizationDate",disabled:!0,readOnly:!0})})]}),(0,u.jsxs)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:[" ",(0,u.jsx)(d.A.Item,{label:(0,u.jsx)("span",{className:"label-style",children:"Asset Retirement Date"}),name:"assetRetirementDate",labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(X.A,{style:{height:"40px",width:"100%"},format:"DD-MM-YYYY",name:"assetRetirementDate",disabled:!0,readOnly:!0})})]})]}),(0,u.jsx)(V.Ay,{item:!0,container:!0,spacing:2,columns:19,children:(0,u.jsxs)(V.Ay,{item:!0,xs:16,sm:16,md:16,lg:16,classNames:"mtb-10 class-checklist",children:[" ",(0,u.jsx)("span",{className:"label-style mb-10",children:"Class Checklist"}),(0,u.jsx)(te.u,{value:o&&o.checkList?Object.values(o.checkList):[],name:"classChecklist",disabled:!0})]})}),(0,u.jsx)(V.Ay,{item:!0,container:!0,children:(0,u.jsx)("h3",{children:"Asset Child Details"})}),(0,u.jsx)(V.Ay,{item:!0,container:!0,spacing:2,columns:19,children:A&&A.length>0?A.map(((e,s)=>null!==e.childId?(0,u.jsx)(V.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,u.jsx)(d.A.Item,{label:(0,u.jsxs)("span",{className:"label-style",children:["Child ",s+1]}),name:"child".concat(s+1),labelAlign:"top",labelCol:{span:24},sx:{width:150,height:"50px"},children:(0,u.jsx)(c.A,{style:{height:"40px"},defaultValue:e.childId,name:"child".concat(s+1),type:"number",className:"no-spinner",disabled:!0,readOnly:!0})})},s):"")):""})]})})})})};function le(e){let{onRowClick:s,selectedData:t,geoLocation:a}=e;return(0,u.jsx)(n.A,{sx:{width:"100%"},children:(0,u.jsx)(n.A,{className:"tob-cen",children:(0,u.jsxs)(V.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,u.jsx)(V.Ay,{item:!0,xs:16,sm:16,md:16,lg:16,children:(0,u.jsx)(G.A,{className:"arrow-back",onClick:()=>{s()}})}),(0,u.jsx)(V.Ay,{item:!0,children:(0,u.jsx)(ae,{selectedAsset:t,geoLocation:a})})]})})})}const ne=e=>{let{onRowClick:s}=e;const t=(0,h.wA)(),[l,n]=a.useState(!1),[i,r]=a.useState([]),[d,c]=a.useState([]),[m,p]=a.useState(),[A,g]=a.useState(),[z,E]=a.useState(!1),[W,T]=a.useState(!1),[Y,q]=(0,a.useState)(!1),[U,G]=(0,a.useState)(),[X,Q]=(0,a.useState)(10),K=(0,a.useRef)(!1),H=(0,a.useRef)(""),[J,_]=(0,a.useState)(null),$=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.AssetAuditPending)),ee=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.AssetAuditPending&&e.AssetAuditData.AssetAuditPending.pendingAuditAssetCounts)),[se,te]=(0,a.useState)("Choose Asset Category"),ae=(0,h.d4)((e=>e.AssetCateData&&e.AssetCateData.AssetCategoryData)),[ne,ie]=a.useState({latitude:null,longitude:null}),re=async(e,s)=>{q(!0);try{const a=(new AbortController).signal,l=e-1;await t((0,F.dN)(l,s,se,m,K.current,H.current,a))}catch(a){q(!1),console.error("Error fetching data:",a)}finally{q(!1)}},oe=(e,s)=>{c(e),p("Approved"===s?"Approve":"Reject"),g(s),E(!0)},de=e=>{_(e),s()},ce=[{title:(0,u.jsx)(j.A,{onChange:e=>{const s=e.target.checked;n(s);const t=s?[...$]:[];r(t)},checked:l}),dataIndex:"checkbox",key:"checkbox",render:(e,s)=>(0,u.jsx)(j.A,{onChange:e=>((e,s)=>{const t=[...i];if(e.target.checked)t.push(s);else{const e=t.findIndex((e=>e.id===s.id));-1!==e&&t.splice(e,1)}r(t),n(t.length===$.length)})(e,s),checked:i.some((e=>e.id===s.id))},s.key)},{dataIndex:"sno",key:"sno",title:(0,u.jsx)("span",{className:"table-hd-fs",children:"SI.No"}),condition:!0,onCell:e=>({onClick:()=>de(e)})},{dataIndex:"assetId",key:"assetId",title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Asset No"}),condition:!0,onCell:e=>({onClick:()=>de(e)})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Asset Class"}),dataIndex:"assetClass",key:"assetClass",condition:!0,onCell:e=>({onClick:()=>de(e)})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Plant"}),key:"plant",dataIndex:"plant",condition:!0,onCell:e=>({onClick:()=>de(e)})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Audit Date"}),dataIndex:"status",key:"status",condition:!0,render:(e,s)=>L()(s.nextAuditDate).format("DD MMM YYYY"),onCell:e=>({onClick:()=>de(e)})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Previous Image "}),dataIndex:"name",key:"name",condition:!0,render:(e,s)=>s.previewImageWithPath?(0,u.jsx)(f.A,{size:"middle",children:(0,u.jsx)("img",{src:s.previewImageWithPath,alt:"Previous",style:{width:"30px"}})}):(0,u.jsx)(f.A,{size:"middle",children:(0,u.jsx)("img",{src:M,alt:"Previous",style:{width:"30px"}})}),onCell:e=>({onClick:()=>de(e)})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Action"}),key:"action",condition:!1,render:(e,s)=>(0,u.jsxs)(f.A,{children:[(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"error",size:"small",className:"w-unset btn-reject",onClick:()=>(c(s),void T(!0)),"data-id":s.id,children:(0,u.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF7SURBVHgBlVTtbcJQDLRfEL87QjZoRggTdIC2Im+CwgSUCQoTJKHiP52gdANGgA3ys0Lg13NIKETkg5MsiPNyOZ/tMAGfcRwy8wQR0gVEZPpq7fsySeK9c2NrbUY1MEpijPmuklyBOerjTBzHD7VE7HkT6oag73kf9UTOhdQVzkXLxSK+SdT0nGF+zP+IWPUrj+NxhxL96llepqlrInMi4xdrZ9SCVqJbKLt5mevRfdiBZIXfdfVGJyIm2h7hE1Ssa8+0laYkLDL4JcowS29IRQgfsUUke5G5Dmq7R1CyJ1rpQOIqKNSlnjFDdyLcgGxg2tQ8W5v0ez1VEpx4Za5Go5vT4lgAf0aNHuHNX4Wq6EwOJVirLZ3KzIEVG6qirIGrvOdf5FRZWMn5RojmVI98SeHF7pwR+UFpI8e8OauEBeYgMsPmr2+xQPJTQZRQA+BXyuWFfk4KyVc4EOXrUXYNkcHw1Px7lHeNqSP0WwSyER4o267l6hzNdI7+AAh+shY8EQOnAAAAAElFTkSuQmCC",alt:"Observation"})})}),(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"error",size:"small",className:"w-unset btn-reject",onClick:()=>oe(s,"Rejected"),"data-id":s.id,children:(0,u.jsx)(O.A,{sx:{fontSize:"16px"}})})}),(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"success",size:"small",className:"w-unset btn-approve",onClick:()=>oe(s,"Approved"),"data-id":s.id,children:(0,u.jsx)(D.A,{sx:{fontSize:"16px"}})})})]})}],xe=(null===$||void 0===$?void 0:$.auditResponses)||[],he=xe.map(((e,s)=>{let t;return t=0==U?U:void 0==U?0:U-1,{...e,sno:t*X+s+1}}));return a.useEffect((()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{ie({latitude:e.coords.latitude,longitude:e.coords.longitude})}),(e=>{e.code===e.PERMISSION_DENIED?toast.error("Please give access for location."):console.error("Error getting geolocation:",e.message)})):console.log("Geolocation is not available in your browser."),t((0,P.WA)()),re(U,X)}),[t,se]),(0,u.jsx)(u.Fragment,{children:J?(0,u.jsx)(le,{onRowClick:de,selectedData:J,geoLocation:ne}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(w.A,{maxWidth:"xl",sx:{height:"100%",width:"100%",bgcolor:"#fff",mt:.5,border:"none",mr:0},children:(0,u.jsxs)(C.A,{disableGutters:!0,sx:{height:"50%",pl:{sm:2},pr:{xs:1,sm:1},...i.length>0&&{bgcolor:e=>(0,v.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[i.length>0?(0,u.jsxs)(b.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[i.length," selected"]}):(0,u.jsxs)(V.Ay,{container:!0,spacing:2,columns:16,children:[(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,children:(0,u.jsx)(N.A,{name:"asset",type:"text",placeholder:"search ",sx:{border:"none"},InputProps:{style:{width:"100%",height:"33px",color:"#C7C7C7",bgcolor:"#FBFBFB"},startAdornment:(0,u.jsx)(I.A,{"aria-label":"Toggle password visibility",edge:"start",children:(0,u.jsx)(k.A,{sx:{color:"#C7C7C7",fontSize:"18px",fontWeight:"700"}})})},value:H.current,onChange:e=>{H.current=e.target.value,""!=e.target.value?K.current=!0:K.current=!1,G(1),re(1,X)}})}),(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,sx:{ml:1},className:"select-ant-cus",children:(0,u.jsx)(S.A,{defaultValue:"Asset Class",style:{width:"100%",height:"33px"},showSearch:!0,onChange:async e=>{te(e),q(!0),G(1);try{const s=(new AbortController).signal;await t((0,F.dN)(1,X,e,m,K.current,H.current,s))}catch(s){q(!1),console.error("Error fetching data:",s)}finally{q(!1)}},options:[{value:"Choose Asset Class",label:"Asset Class"},...ae.map((e=>({value:e.assetClass,label:e.assetClass})))]})}),(0,u.jsx)(V.Ay,{item:!0,lg:6,sm:4})]}),i.length>0&&(0,u.jsx)(R.A,{title:"Delete",children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"success",size:"small",className:"w-unset btn-approve",children:(0,u.jsx)(D.A,{sx:{fontSize:"16px"}})})}),(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"error",size:"small",className:"w-unset btn-reject",children:(0,u.jsx)(O.A,{sx:{fontSize:"16px"}})})})]})})]})}),(0,u.jsx)(y.A,{className:"table-hd",columns:ce,dataSource:he,pagination:!1,loading:Y,showSorterTooltip:!1}),(0,u.jsx)("div",{className:"align-center-data",children:(0,u.jsx)(B.A,{defaultCurrent:U,current:U,total:ee,pageSize:X,onChange:(e,s)=>{G(e),Q(s),re(e,s)},hideOnSinglePage:!0})}),(0,u.jsx)(x.A,{AssetData:d,StatusType:m,Status:A,isModalOpen:z,setIsModalOpen:E}),(0,u.jsx)(Z,{AssetData:d,isModalOpen:W,setIsModalOpen:T})]})})},ie=()=>{const e=(0,h.wA)(),[s,t]=a.useState(!1),[l,n]=a.useState([]),i=(0,a.useRef)(!1),[r,d]=(0,a.useState)(),[c,x]=(0,a.useState)(10),[m,p]=(0,a.useState)(!1),A=(0,a.useRef)(!1),g=(0,a.useRef)(""),W=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.AssetAuditByRejected)),L=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.AssetAuditByRejected&&e.AssetAuditData.AssetAuditByRejected.auditStatusCounts)),[T,M]=(0,a.useState)("Choose Asset Category"),Y=(0,h.d4)((e=>e.AssetCateData&&e.AssetCateData.AssetCategoryData)),q="Rejected",[U,Z]=(0,a.useState)(),G=(e,s)=>{U?Z():Z(s)},X=async(s,t)=>{p(!0);try{const a=(new AbortController).signal,l=s-1;await e((0,F.NZ)(l,t,A.current,g.current,q,T,a))}catch(a){p(!1),console.error("Error fetching data:",a)}finally{p(!1)}},Q=[{title:(0,u.jsx)(j.A,{onChange:e=>{const s=e.target.checked;t(s);const a=s?[...W]:[];n(a)},checked:s}),dataIndex:"checkbox",key:"checkbox",render:(e,s)=>(0,u.jsx)(j.A,{onChange:e=>((e,s)=>{const a=[...l];if(e.target.checked)a.push(s);else{const e=a.findIndex((e=>e.id===s.id));-1!==e&&a.splice(e,1)}n(a),t(a.length===W.length)})(e,s),checked:l.some((e=>e.id===s.id))},s.key)},{dataIndex:"sno",key:"sno",title:(0,u.jsx)("span",{className:"table-hd-fs",children:"SI.No"}),sorter:{compare:(e,s)=>e.sno-s.sno,multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{dataIndex:"assetId",key:"assetId",title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Asset No"}),render:(e,s)=>s.assetId||"",sorter:{compare:(e,s)=>e.assetId.localeCompare(s.assetId),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Asset Class"}),dataIndex:"assetClass",key:"assetClass",render:(e,s)=>s.assetClass||"",sorter:{compare:(e,s)=>e.assetClass.localeCompare(s.assetClass),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Plant"}),key:"plant",dataIndex:"plant",render:(e,s)=>s.plant||"",sorter:{compare:(e,s)=>e.plant.localeCompare(s.plant),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Previous Image "}),dataIndex:"name",key:"name",render:(e,s)=>(0,u.jsx)(f.A,{size:"middle",children:(0,u.jsx)("img",{src:(null===s||void 0===s?void 0:s.previewImageWithPath)||"",alt:"Previous",style:{width:"30px"}})})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Current Image "}),dataIndex:"name",key:"name",render:(e,s)=>(0,u.jsx)(f.A,{size:"middle",children:(0,u.jsx)("img",{src:(null===s||void 0===s?void 0:s.currentImageWithPath)||"",alt:"Current",style:{width:"30px"}})})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Status"}),dataIndex:"status",key:"status",render:(e,s)=>(0,u.jsx)(o.A,{className:"btn-status-approved",color:"success",children:null===s||void 0===s?void 0:s.status}),sorter:{compare:(e,s)=>e.status.localeCompare(s.status),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Remarks"}),key:"action",render:(e,s)=>{return t=null===s||void 0===s?void 0:s.remark,a=s.id,t?t.length<=10?t:(0,u.jsxs)(u.Fragment,{children:[U==a?t:"".concat(t.slice(0,10),"... "),(0,u.jsx)("span",{role:"button",tabIndex:"0",className:"read-more-btn",onClick:e=>G(0,a),onKeyDown:e=>{"Enter"===e.key&&G()},children:U==a?" Read less":" Read more"})]}):null;var t,a}}],K=(null===W||void 0===W?void 0:W.auditsData)||[],H=K.map(((e,s)=>{let t;return t=0==r?r:void 0==r?0:r-1,{...e,sno:t*c+s+1}}));return a.useEffect((()=>(i.current||(e((0,P.WA)()),X(r,c)),()=>{i.current=!0})),[e,r,c]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(w.A,{maxWidth:"xl",sx:{height:"100%",width:"100%",bgcolor:"#fff",mt:.5,border:"none",mr:0},children:(0,u.jsxs)(C.A,{disableGutters:!0,sx:{height:"50%",pl:{sm:2},pr:{xs:1,sm:1},...l.length>0&&{bgcolor:e=>(0,v.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[l.length>0?(0,u.jsxs)(b.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[l.length," selected"]}):(0,u.jsxs)(V.Ay,{container:!0,spacing:2,columns:16,children:[(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,children:(0,u.jsx)(N.A,{name:"asset",type:"text",placeholder:"search ",sx:{border:"none"},InputProps:{style:{width:"100%",height:"33px",color:"#C7C7C7",bgcolor:"#FBFBFB"},startAdornment:(0,u.jsx)(I.A,{"aria-label":"Toggle password visibility",edge:"start",children:(0,u.jsx)(k.A,{sx:{color:"#C7C7C7",fontSize:"18px",fontWeight:"700"}})})},value:g.current,onChange:e=>{g.current=e.target.value,""!=e.target.value?A.current=!0:A.current=!1,d(1),(0,F.NZ)(1,c,A.current,g.current,q,T)}})}),(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,sx:{ml:1},className:"select-ant-cus",children:(0,u.jsx)(S.A,{defaultValue:"Asset class",style:{width:"100%",height:"33px"},showSearch:!0,onChange:async s=>{M(s),p(!0),d(1);try{const t=(new AbortController).signal;await e((0,F.NZ)(1,c,A.current,g.current,q,s,t))}catch(t){p(!1),console.error("Error fetching data:",t)}finally{p(!1)}},options:[{value:"Choose Asset Category",label:"Asset Class"},...Y.map((e=>({value:e.assetClass,label:e.assetClass})))]})}),(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,sx:{ml:1},className:"select-ant-cus"}),(0,u.jsx)(V.Ay,{item:!0,lg:6,sm:4})]}),l.length>0&&(0,u.jsx)(R.A,{title:"Delete",children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"success",size:"small",className:"w-unset btn-approve",children:(0,u.jsx)(D.A,{sx:{fontSize:"16px"}})})}),(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"error",size:"small",className:"w-unset btn-reject",children:(0,u.jsx)(O.A,{sx:{fontSize:"16px"}})})})]})})]})}),(0,u.jsx)(y.A,{className:"table-hd",columns:Q,dataSource:H,pagination:!1,loading:m,showSorterTooltip:!1}),(0,u.jsx)("div",{className:"align-center-data",children:(0,u.jsx)(B.A,{defaultCurrent:r,current:r,total:L,pageSize:c,onChange:(e,s)=>{d(e),x(s),X(e,s)},hideOnSinglePage:!0})})]})},re=()=>{const e=(0,h.wA)(),[s,t]=a.useState(!1),[l,n]=a.useState([]),i=(0,a.useRef)(!1),[r,d]=(0,a.useState)(),[c,x]=(0,a.useState)(10),[m,p]=(0,a.useState)(!1),A=(0,a.useRef)(!1),g=(0,a.useRef)(""),W=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.ObservationAsset)),L=(0,h.d4)((e=>e.AssetAuditData&&e.AssetAuditData.ObservationAsset&&e.AssetAuditData.ObservationAsset.observationCount)),[T,M]=(0,a.useState)("Choose Asset Category"),Y=(0,h.d4)((e=>e.AssetCateData&&e.AssetCateData.AssetCategoryData)),q="Observation",[U,Z]=(0,a.useState)(),G=(e,s)=>{U?Z():Z(s)},X=async(s,t)=>{p(!0);try{const a=(new AbortController).signal,l=s-1;await e((0,F.bA)(l,t,A.current,g.current,T,a))}catch(a){p(!1),console.error("Error fetching data:",a)}finally{p(!1)}},Q=[{title:(0,u.jsx)(j.A,{onChange:e=>{const s=e.target.checked;t(s);const a=s?[...W]:[];n(a)},checked:s}),dataIndex:"checkbox",key:"checkbox",render:(e,s)=>(0,u.jsx)(j.A,{onChange:e=>((e,s)=>{const a=[...l];if(e.target.checked)a.push(s);else{const e=a.findIndex((e=>e.id===s.id));-1!==e&&a.splice(e,1)}n(a),t(a.length===W.length)})(e,s),checked:l.some((e=>e.id===s.id))},s.key)},{dataIndex:"sno",key:"sno",title:(0,u.jsx)("span",{className:"table-hd-fs",children:"SI.No"}),sorter:{compare:(e,s)=>e.sno-s.sno,multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{dataIndex:"assetId",key:"assetId",title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Asset No"}),render:(e,s)=>s.assetId||"",sorter:{compare:(e,s)=>e.assetId.localeCompare(s.assetId),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Asset Class"}),dataIndex:"assetClass",key:"assetClass",render:(e,s)=>s.assetClass||"",sorter:{compare:(e,s)=>e.assetClass.localeCompare(s.assetClass),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Plant"}),key:"plant",dataIndex:"plant",render:(e,s)=>s.plant||"",sorter:{compare:(e,s)=>e.plant.localeCompare(s.plant),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,u.jsx)(E.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,u.jsx)(z.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Previous Image "}),dataIndex:"name",key:"name",render:(e,s)=>(0,u.jsx)(f.A,{size:"middle",children:(0,u.jsx)("img",{src:(null===s||void 0===s?void 0:s.previewImageWithPath)||"",alt:"Previous",style:{width:"30px"}})})},{title:(0,u.jsx)("span",{className:"table-hd-fs",children:"Observation Remarks"}),key:"action",render:(e,s)=>{return t=null===s||void 0===s?void 0:s.remarks,a=s.id,t?t.length<=10?t:(0,u.jsxs)(u.Fragment,{children:[U==a?t:"".concat(t.slice(0,10),"... "),(0,u.jsx)("span",{role:"button",tabIndex:"0",className:"read-more-btn",onClick:e=>G(0,a),onKeyDown:e=>{"Enter"===e.key&&G()},children:U==a?" Read less":" Read more"})]}):null;var t,a}}],K=(null===W||void 0===W?void 0:W.observationData)||[],H=K.map(((e,s)=>{let t;return t=0==r?r:void 0==r?0:r-1,{...e,sno:t*c+s+1}}));return a.useEffect((()=>(i.current||(e((0,P.WA)()),X(r,c)),()=>{i.current=!0})),[e,q,T,r,c]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(w.A,{maxWidth:"xl",sx:{height:"100%",width:"100%",bgcolor:"#fff",mt:.5,border:"none",mr:0},children:(0,u.jsxs)(C.A,{disableGutters:!0,sx:{height:"50%",pl:{sm:2},pr:{xs:1,sm:1},...l.length>0&&{bgcolor:e=>(0,v.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[l.length>0?(0,u.jsxs)(b.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[l.length," selected"]}):(0,u.jsxs)(V.Ay,{container:!0,spacing:2,columns:16,children:[(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,children:(0,u.jsx)(N.A,{name:"asset",type:"text",placeholder:"search ",sx:{border:"none"},InputProps:{style:{width:"100%",height:"33px",color:"#C7C7C7",bgcolor:"#FBFBFB"},startAdornment:(0,u.jsx)(I.A,{"aria-label":"Toggle password visibility",edge:"start",children:(0,u.jsx)(k.A,{sx:{color:"#C7C7C7",fontSize:"18px",fontWeight:"700"}})})},value:g.current,onChange:e=>{g.current=e.target.value,""!=e.target.value?A.current=!0:A.current=!1,d(1),(0,F.bA)(1,c,A.current,g.current,T)}})}),(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,sx:{ml:1},className:"select-ant-cus",children:(0,u.jsx)(S.A,{defaultValue:"Asset Category",style:{width:"100%",height:"33px"},showSearch:!0,onChange:async s=>{M(s),p(!0),d(1);try{const t=(new AbortController).signal;await e((0,F.bA)(1,c,A.current,g.current,s,t))}catch(t){p(!1),console.error("Error fetching data:",t)}finally{p(!1)}},options:[{value:"Choose Asset Category",label:"Asset Class"},...Y.map((e=>({value:e.assetClass,label:e.assetClass})))]})}),(0,u.jsx)(V.Ay,{item:!0,lg:2,sm:4,sx:{ml:1},className:"select-ant-cus"}),(0,u.jsx)(V.Ay,{item:!0,lg:6,sm:4})]}),l.length>0&&(0,u.jsx)(R.A,{title:"Delete",children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"success",size:"small",className:"w-unset btn-approve",children:(0,u.jsx)(D.A,{sx:{fontSize:"16px"}})})}),(0,u.jsx)(V.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,u.jsx)(o.A,{color:"error",size:"small",className:"w-unset btn-reject",children:(0,u.jsx)(O.A,{sx:{fontSize:"16px"}})})})]})})]})}),(0,u.jsx)(y.A,{className:"table-hd",columns:Q,dataSource:H,pagination:!1,loading:m,showSorterTooltip:!1}),(0,u.jsx)("div",{className:"align-center-data",children:(0,u.jsx)(B.A,{defaultCurrent:r,current:r,total:L,pageSize:c,onChange:(e,s)=>{d(e),x(s),X(e,s,A.current,g.current)},hideOnSinglePage:!0})})]})};function oe(e){const{children:s,value:t,index:a,...l}=e;return(0,u.jsx)("div",{role:"tabpanel",hidden:t!==a,id:"transfer-tabpanel-".concat(a),"aria-labelledby":"transfer-tab-".concat(a),...l,children:t===a&&(0,u.jsx)(b.A,{children:s})})}function de(e){return{id:"transfer-tab-".concat(e),"aria-controls":"transfer-tabpanel-".concat(e)}}function ce(e){let{onRowClick:s}=e;const[t,l]=a.useState(0),[i,r]=a.useState(!1);return(0,u.jsxs)(n.A,{sx:{width:"100%"},children:[!i&&(0,u.jsx)(n.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,u.jsxs)(A.A,{value:t,onChange:(e,s)=>{l(s)},"aria-label":"basic tabs example",className:"tab-ind-sty",children:[(0,u.jsx)(g.A,{sx:{fontSize:"12px",color:"#919EAB"},label:"Pending",...de(0)}),(0,u.jsx)(g.A,{sx:{fontSize:"12px",color:"#919EAB"},label:"Approved",...de(1)}),(0,u.jsx)(g.A,{sx:{fontSize:"12px",color:"#919EAB"},label:"Rejected",...de(2)}),(0,u.jsx)(g.A,{sx:{fontSize:"12px",color:"#919EAB"},label:"Observation",...de(3)})]})}),(0,u.jsx)(oe,{value:t,index:0,sx:{width:"0px"},children:(0,u.jsx)(ne,{onRowClick:()=>{r(!i),s()}})}),(0,u.jsx)(oe,{value:t,index:1,children:(0,u.jsx)(T,{})}),(0,u.jsx)(oe,{value:t,index:2,children:(0,u.jsx)(ie,{})}),(0,u.jsx)(oe,{value:t,index:3,children:(0,u.jsx)(re,{})})]})}var xe=t(96032);const he=()=>{const[e,s]=a.useState(!1);return(0,u.jsxs)(xe.A,{children:[!e&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(l.A,{className:"margin-bottom-20px",sx:{width:"100%",overflow:"auto",boxShadow:"none",borderRadius:"10px"},children:(0,u.jsx)(p,{})})}),(0,u.jsx)(l.A,{sx:{height:"100%",width:"100%",overflow:"auto",boxShadow:"none",borderRadius:"10px"},children:(0,u.jsx)(ce,{onRowClick:()=>{s(!e)}})})]})}},7762:(e,s,t)=>{var a=t(24994);s.A=void 0;var l=a(t(79526)),n=t(44414);s.A=(0,l.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},91601:(e,s,t)=>{t.d(s,{u:()=>o});var a=t(9950);function l(e,s){let t=(0,a.useRef)(!1);(0,a.useEffect)((()=>{t.current?e():t.current=!0}),s)}function n(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e=>e)).join(" ")}function i(e){let{text:s,remove:t,disabled:l,className:i}=e;return a.createElement("span",{className:n("rti--tag",i)},a.createElement("span",null,s),!l&&a.createElement("button",{type:"button",onClick:e=>{e.stopPropagation(),t(s)},"aria-label":"remove ".concat(s)},"\u2715"))}!function(e){let{insertAt:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===s&&t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}(".rti--container *{box-sizing:border-box;transition:all .2s ease}.rti--container{--rti-bg: #fff;--rti-border: #ccc;--rti-main: #3182ce;--rti-radius: .375rem;--rti-s: .5rem;--rti-tag: #edf2f7;--rti-tag-remove: #e53e3e;--rti-tag-padding: .15rem .25rem;align-items:center;background:var(--rti-bg);border:1px solid var(--rti-border);border-radius:var(--rti-radius);display:flex;flex-wrap:wrap;gap:var(--rti-s);line-height:1.4;padding:var(--rti-s)}.rti--container:focus-within{border-color:var(--rti-main);box-shadow:var(--rti-main) 0 0 0 1px}.rti--input{border:0;outline:0;font-size:inherit;line-height:inherit;width:50%}.rti--tag{align-items:center;background:var(--rti-tag);border-radius:var(--rti-radius);display:inline-flex;justify-content:center;padding:var(--rti-tag-padding)}.rti--tag button{background:none;border:0;border-radius:50%;cursor:pointer;line-height:inherit;padding:0 var(--rti-s)}.rti--tag button:hover{color:var(--rti-tag-remove)}\n");var r=["Enter"],o=e=>{let{name:s,placeHolder:t,value:o,onChange:d,onBlur:c,separators:x,disableBackspaceRemove:h,onExisting:m,onRemoved:u,disabled:p,isEditOnRemove:A,beforeAddValidate:g,onKeyUp:b,classNames:j}=e,[f,y]=(0,a.useState)(o||[]);l((()=>{d&&d(f)}),[f]),l((()=>{JSON.stringify(o)!==JSON.stringify(f)&&y(o)}),[o]);let C=e=>{y(f.filter((s=>s!==e))),u&&u(e)};return a.createElement("div",{"aria-labelledby":s,className:"rti--container"},f.map((e=>a.createElement(i,{key:e,className:null==j?void 0:j.tag,text:e,remove:C,disabled:p}))),a.createElement("input",{className:n("rti--input",null==j?void 0:j.input),type:"text",name:s,placeholder:t,onKeyDown:e=>{e.stopPropagation();let s=e.target.value;if(!s&&!h&&f.length&&"Backspace"===e.key&&(e.target.value=A?"".concat(f.at(-1)," "):"",y([...f.slice(0,-1)])),s&&(x||r).includes(e.key)){if(e.preventDefault(),g&&!g(s,f))return;if(f.includes(s))return void(m&&m(s));y([...f,s]),e.target.value=""}},onBlur:c,disabled:p,onKeyUp:b}))}}}]);