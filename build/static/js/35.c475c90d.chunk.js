"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[35],{36853:(e,s,t)=>{t.d(s,{qJ:()=>n,qL:()=>o,uO:()=>r});var a=t(3680),l=t(65629);const n=e=>s=>{a.A.get("/asset-class/get-all",{signal:e,headers:{"Content-Type":"application/json"}}).then((e=>{s({type:l.ZF,payload:e.data.data})})).catch((e=>{console.log("error",e)}))},o=()=>e=>{a.A.get("/asset-class/check-list-asset-class",{headers:{"Content-Type":"application/json"}}).then((s=>{e({type:l.Z_,payload:s.data.data})})).catch((e=>{console.log("error",e)}))},r=(e,s)=>t=>{let n,o;n=e||0,o="/asset-class/get-all-master?page=".concat(n,"&size=").concat(s),a.A.get(o,{headers:{"Content-Type":"application/json"}}).then((e=>{t({type:l.gk,payload:e.data.data})})).catch((e=>{console.log("error",e)}))}},56035:(e,s,t)=>{t.r(s),t.d(s,{default:()=>P});var a=t(48089),l=t(9950),n=t(10495),o=t(65059),r=t(35621),i=t(45259),c=t(73149),d=t(52160),h=t(44290),p=t(83239),x=t(25333),u=t(19808),A=t(33306),g=t(47435),m=t(54957),C=t(87426),f=t(28429),b=t(809),j=t(90791),k=t(82569),N=t(60899),y=t(16491),S=t(29606),w=t(69267),T=t(35607),v=t(8750),D=(t(20236),t(83511)),I=t(99386),z=t(41388),E=t(93124),O=t(74763),q=t(85923),F=t(36853),R=t(44414);const W=e=>{let{isModalOpen:s,setIsModalOpen:t}=e;const a=(0,k.wA)(),[n,o]=(0,l.useState)(!1),[r]=D.A.useForm(),i=(0,k.d4)((e=>e.AssetClassData&&e.AssetClassData.AssetClassData)),c=(0,k.d4)((e=>e.AssetCreationData&&e.AssetCreationData.AssetTicketNoCount)),{Option:d}=I.A;return(0,l.useEffect)((()=>{console.log("isModalOpen",s),a((0,F.qJ)()),a((0,j.Rn)())}),[s,a]),(0,l.useEffect)((()=>{s||r.setFieldsValue({ticketNo:"AST-SW-".concat((c.count+1).toString().padStart(5,"0"))})}),[s,c,r]),(0,R.jsxs)(z.A,{title:"Asset Ticket Creation",open:s,okText:"Submit",onOk:async()=>{o(!0),r.validateFields().then((e=>{console.log(e);const s=new FormData;s.append("assetName",e.assetName),s.append("description",e.description),s.append("assetClass",e.assetClass),s.append("ticketNo",e.ticketNo),a((0,j.L2)(s)).then((e=>{q.oR.success(e.data.message);const s=(new AbortController).signal;a((0,j.Uu)(null,null,0,10,!1,null,s)),a((0,j.Rn)()),r.resetFields(),t(!1),o(!1),r.setFieldsValue({ticketNo:"AST-SW-".concat((c.count+1).toString().padStart(5,"0"))})})).catch((e=>{q.oR.error(e.response.data.message),o(!1)}))})).catch((e=>{console.log(e),o(!1),q.oR.error("Validation error",e)}))},confirmLoading:n,onCancel:()=>{r.resetFields(),t(!1),o(!1)},width:600,className:"text-arul",sx:{height:"100%",width:"100% ",fontWeight:"700",fontSize:"24px",color:"#161C24"},children:[(0,R.jsx)(O.A,{}),(0,R.jsxs)(D.A,{form:r,children:[(0,R.jsx)(D.A.Item,{label:"Ticket No.",name:"ticketNo",labelAlign:"top",labelCol:{span:24},sx:{width:"100%",height:"40px"},rules:[{required:!0,message:"This field is required"}],children:(0,R.jsx)(E.A,{placeholder:"Enter Ticket No",style:{height:"40px"},readOnly:!0})}),(0,R.jsx)(D.A.Item,{label:"Asset Name",name:"assetName",labelAlign:"top",labelCol:{span:24},sx:{width:"100%",height:"40px"},rules:[{required:!0,message:"This field is required"}],children:(0,R.jsx)(E.A,{placeholder:"Enter Asset Name",style:{height:"40px"}})}),(0,R.jsx)(D.A.Item,{label:"Asset Class",name:"assetClass",labelAlign:"top",labelCol:{span:24},sx:{width:"100%",height:"40px"},rules:[{required:!0,message:"This field is required"}],children:(0,R.jsx)(I.A,{defaultValue:"Choose Asset Class",style:{height:"40px"},showSearch:!0,children:i.map((e=>(0,R.jsx)(d,{value:e.assetClass,children:e.assetClass},e.assetClass)))})}),(0,R.jsx)(D.A.Item,{label:"AssetDescription",name:"description",labelAlign:"top",labelCol:{span:24},sx:{width:"100%"},rules:[{required:!0,message:"This field is required"}],children:(0,R.jsx)(E.A,{placeholder:"Enter Description",style:{height:"100px",verticalAlign:"top",textAlign:"left"}})})]})]})},M=e=>{let{AssetTicket:s,StatusType:t,isEditModalOpen:a,setIsEditModalOpen:n}=e;const o=(0,k.wA)(),[r,i]=(0,l.useState)(!1),[c]=D.A.useForm(),d=(0,k.d4)((e=>e.AssetClassData&&e.AssetClassData.AssetClassData)),{Option:h}=I.A;return(0,l.useEffect)((()=>{a&&(o((0,F.qJ)()),c.setFieldsValue({ticketNo:s.ticketNo,assetName:s.assetName,assetClass:s.assetClass,description:s.description}))}),[a,o,c,s]),(0,R.jsxs)(z.A,{title:"Asset Ticket "+t,open:a,okText:"Update",onOk:async()=>{"Edit"==t&&(i(!0),c.validateFields().then((e=>{console.log(e);const t=new FormData;t.append("assetName",e.assetName),t.append("description",e.description),t.append("assetClass",e.assetClass),t.append("ticketNo",e.ticketNo),o((0,j.uR)(s.id,t)).then((e=>{q.oR.success(e.data.message);const s=(new AbortController).signal;o((0,j.Uu)(null,null,0,10,!1,null,s)),c.resetFields(),n(!1),i(!1),setIdCount((e=>e+1))})).catch((e=>{q.oR.error(e),i(!1)}))})).catch((e=>{console.log(e),i(!1),q.oR.error("Validation error",e)})))},confirmLoading:r,onCancel:()=>{c.resetFields(),n(!1),i(!1)},width:600,className:"text-arul",sx:{height:"100%",width:"100% ",fontWeight:"700",fontSize:"24px",color:"#161C24"},children:[(0,R.jsx)(O.A,{}),(0,R.jsxs)(D.A,{form:c,children:[(0,R.jsx)(D.A.Item,{label:"Ticket No.",name:"ticketNo",labelAlign:"top",labelCol:{span:24},sx:{width:"100%",height:"40px"},rules:[{required:!0,message:"This field is required"}],children:(0,R.jsx)(E.A,{placeholder:"Enter Ticket No",style:{height:"40px"},readOnly:!0})}),(0,R.jsx)(D.A.Item,{label:"Asset Name",name:"assetName",labelAlign:"top",labelCol:{span:24},sx:{width:"100%",height:"40px"},rules:[{required:!0,message:"This field is required"}],children:(0,R.jsx)(E.A,{placeholder:"Enter Asset Name",style:{height:"40px"}})}),(0,R.jsx)(D.A.Item,{label:"Asset Class",name:"assetClass",labelAlign:"top",labelCol:{span:24},sx:{width:"100%",height:"40px"},rules:[{required:!0,message:"This field is required"}],children:(0,R.jsx)(I.A,{defaultValue:"Choose Asset Class",style:{height:"40px"},showSearch:!0,children:d.map((e=>(0,R.jsx)(h,{value:e.assetClass,children:e.assetClass},e.assetClass)))})}),(0,R.jsx)(D.A.Item,{label:"AssetDescription",name:"description",labelAlign:"top",labelCol:{span:24},sx:{width:"100%"},rules:[{required:!0,message:"This field is required"}],children:(0,R.jsx)(E.A,{placeholder:"Enter Description",style:{height:"100px",verticalAlign:"top",textAlign:"left"}})})]})]})},V=()=>{const e=(0,k.wA)(),s=(0,f.zy)(),[t,a]=l.useState(!1),[D,I]=l.useState([]),z=(0,l.useRef)(!1),E=(0,l.useRef)(""),[O,F]=(0,l.useState)(),[V,_]=(0,l.useState)(10),P=new URLSearchParams(s.search).get("class"),U=(0,k.d4)((e=>e.AssetCreationData&&e.AssetCreationData.AssetTicket)),L=(0,k.d4)((e=>e.AssetCreationData&&e.AssetCreationData.AssetTicket&&e.AssetCreationData.AssetTicket.assetTicketCount)),[J,B]=(0,l.useState)(P||"Choose Asset Class"),[Z,G]=(0,l.useState)("Ticket No"),[K,Y]=(0,l.useState)(!1),H=(0,k.d4)((e=>e.AssetCreationData&&e.AssetCreationData.AssetTicketNo)),Q=(0,k.d4)((e=>e.AssetCreationData&&e.AssetCreationData.AssetTicketNo)),[X,$]=l.useState(!1),[ee,se]=l.useState(!1),[te,ae]=l.useState([]),[le,ne]=l.useState(),oe=(null===U||void 0===U?void 0:U.assetTicket)||[],re=async(s,t)=>{Y(!0);try{const a=(new AbortController).signal,l=s-1;await e((0,j.Uu)(J,Z,l,t,z.current,E.current,a))}catch(a){Y(!1),console.error("Error fetching data:",a)}finally{Y(!1)}},ie=(e,s)=>{console.log(s),ae(e),ne(s),se(!0)},ce=oe.map(((e,s)=>{let t;return t=0==O?O:void 0==O?0:O-1,{...e,sno:t*V+s+1}}));const de=(s,t,a)=>{e((0,j.q3)(s.id,a)).then((()=>{re(O,V)})).catch((e=>{q.oR.error(e.response.data.message)}))},he=()=>{re(1,V)},pe=[{value:"",label:"Asset Class"},...Array.from(Q.reduce(((e,s)=>(e.has(s.assetClass)||e.set(s.assetClass,{value:s.assetClass,label:s.assetClass}),e)),new Map).values())],xe=[{title:(0,R.jsx)(n.A,{onChange:e=>{const s=e.target.checked;a(s);const t=s?[...oe]:[];I(t)},checked:t}),dataIndex:"checkbox",key:"checkbox",render:(e,s)=>(0,R.jsx)(n.A,{onChange:e=>((e,s)=>{const t=[...D];if(e.target.checked)t.push(s);else{const e=t.findIndex((e=>e.id===s.id));-1!==e&&t.splice(e,1)}I(t),a(t.length===oe.length)})(e,s),checked:D.some((e=>e.id===s.id))},s.key)},{title:(0,R.jsx)("span",{className:"table-hd-fs",children:"SI.No"}),dataIndex:"sno",key:"sno",sorter:{compare:(e,s)=>e.sno-s.sno,multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,R.jsx)(C.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,R.jsx)(m.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{dataIndex:"ticketNo",key:"ticketNo",title:(0,R.jsx)("span",{className:"table-hd-fs",children:"Ticket No"}),sorter:{compare:(e,s)=>e.ticketNo.localeCompare(s.ticketNo),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,R.jsx)(C.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,R.jsx)(m.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,R.jsx)("span",{className:"table-hd-fs",children:"Asset Class"}),dataIndex:"assetClass",key:"assetClass",sorter:{compare:(e,s)=>e.assetClass.localeCompare(s.assetClass),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,R.jsx)(C.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,R.jsx)(m.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{dataIndex:"assetName",key:"assetName",title:(0,R.jsx)("span",{className:"table-hd-fs",children:"Asset Name."}),render:(e,s)=>(0,R.jsx)(o.A,{content:s.assetName,title:"Asset Name",trigger:s.assetName.length>10?"hover":"",children:s.assetName.length>10?"".concat(s.assetName.slice(0,10),"..."):s.assetName}),sorter:{compare:(e,s)=>e.assetName.localeCompare(s.assetName),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,R.jsx)(C.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,R.jsx)(m.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,R.jsx)("span",{className:"table-hd-fs",children:"SAP Status"}),dataIndex:"sapStatus",key:"sapStatus",render:(e,s)=>{const t="Approved"===s.sapStatus?"table-value-badge-success":"table-value-badge-warning";return(0,R.jsx)("span",{className:t,children:s.sapStatus})},sorter:{compare:(e,s)=>e.sapStatus.localeCompare(s.sapStatus),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,R.jsx)(C.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,R.jsx)(m.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,R.jsx)("span",{className:"table-hd-fs",children:"Asset Description"}),dataIndex:"description",key:"description",render:(e,s)=>(0,R.jsx)(o.A,{content:s.description,title:"Asset Description",trigger:s.description.length>10?"hover":"",children:s.description.length>10?"".concat(s.description.slice(0,10),"..."):s.description})},{title:(0,R.jsx)("span",{className:"table-hd-fs",children:"Asset Status"}),dataIndex:"assetStatus",key:"assetStatus",render:(e,s)=>{const t="Pending"===s.status,a="Completed"===s.status,l="Approved"===s.sapStatus;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(r.A.CheckableTag,{style:{cursor:a?"not-allowed":"pointer",borderRadius:"4px",padding:"10px 16px",fontSize:"medium",backgroundColor:t?"#ffecb3":"",color:t?"#d4a60f":"#bfc5ce"},className:"tag-pending",checked:t,onChange:e=>!a&&de(s,0,"Pending"),disabled:a,children:"Pending"}),(0,R.jsx)(r.A.CheckableTag,{className:"tag-completed",style:{borderRadius:"4px",padding:"10px 16px",fontSize:"medium",backgroundColor:a?"#d9f7be":"",color:a?"#52c41a":"#bfc5ce",cursor:l?"pointer":"not-allowed"},checked:a,onChange:e=>l&&de(s,0,"Completed"),disabled:!l,children:"Completed"})]})},sorter:{compare:(e,s)=>e.status.localeCompare(s.status),multiple:1},sortDirections:["descend","ascend"],sortIcon:e=>{let{sortOrder:s}=e;return"descend"===s?(0,R.jsx)(C.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}}):(0,R.jsx)(m.A,{sx:{fontSize:"12px",fontWeight:"600",color:"#919eab"}})}},{title:(0,R.jsx)("span",{className:"table-hd-fs",children:"Action"}),key:"action",render:(s,t)=>{let a="Approved"===t.sapStatus;return(0,R.jsxs)(i.A,{children:[(0,R.jsx)(N.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,R.jsx)("div",{role:"button",className:"btn-scrap-transfer",style:{pointerEvents:a?"none":"block"},tabIndex:"0",onClick:()=>!a&&ie(t,"Edit"),onKeyDown:e=>{"Enter"===e.key&&!a&&ie(t,"Edit")},children:(0,R.jsx)(w.A,{sx:{fontSize:"16px"},style:{color:a?"#a5a1a17d":""}})})}),(0,R.jsx)(N.Ay,{item:!0,sx:{color:"#A5A1A1",fontSize:"10px"},children:(0,R.jsx)(c.A,{title:"Delete the Ticket",description:"Are you sure to delete this Ticket?",onConfirm:()=>!a&&(s=>{e((0,j.CJ)(s.id)).then((e=>{q.oR.success(e.data.message),re(1,V)})).catch((e=>{q.oR.error(e)}))})(t),onCancel:he,okText:"Yes",cancelText:"No",disabled:a,children:(0,R.jsx)("div",{role:"button",className:"btn-scrap-transfer",style:{pointerEvents:a?"none":"block"},tabIndex:"0",children:(0,R.jsx)(T.A,{sx:{fontSize:"16px"},style:{color:a?"#a5a1a17d":""}})})})})]})}}];return l.useEffect((()=>{e((0,j.j3)("All")),re(O,V)}),[e,O,V]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(u.A,{maxWidth:"xl",sx:{height:"auto",width:"100%",bgcolor:"#fff",mt:.5,border:"none",mr:0},children:(0,R.jsx)(p.A,{disableGutters:!0,sx:{height:"50%"},children:(0,R.jsxs)(N.Ay,{item:!0,container:!0,spacing:2,columns:16,children:[(0,R.jsx)(N.Ay,{item:!0,lg:3,sm:5,children:(0,R.jsx)(A.A,{name:"asset",type:"text",placeholder:"search ",className:"search-input-bg",sx:{border:"none"},InputProps:{style:{width:"100%",height:"33px",color:"#C7C7C7",bgcolor:"#FBFBFB"},startAdornment:(0,R.jsx)(x.A,{"aria-label":"Toggle password visibility",edge:"start",children:(0,R.jsx)(g.A,{sx:{color:"#C7C7C7",fontSize:"18px",fontWeight:"700"}})})},value:E.current,onChange:e=>{E.current=e.target.value,""!=e.target.value?z.current=!0:z.current=!1,F(1),re(1,V)}})}),(0,R.jsx)(N.Ay,{item:!0,lg:2,sm:3,sx:{ml:1},className:"select-ant-cus",children:(0,R.jsx)(S.A,{defaultValue:P||"Asset Class",style:{width:"100%",height:"33px"},showSearch:!0,onChange:async s=>{console.log(s),B(s),Y(!0);try{const t=(new AbortController).signal;F(1),await e((0,j.Uu)(s,Z,0,V,z.current,E.current,t))}catch(t){Y(!1),console.error("Error fetching data:",t)}finally{Y(!1)}},options:pe})}),(0,R.jsx)(N.Ay,{item:!0,lg:2,sm:3,sx:{ml:1},className:"select-ant-cus",children:(0,R.jsx)(S.A,{defaultValue:"Ticket No",value:Z,style:{width:"100%",height:"33px"},showSearch:!0,onChange:async s=>{G(s),Y(!0);try{const t=(new AbortController).signal;F(1),await e((0,j.Uu)(J,s,0,V,z.current,E.current,t))}catch(t){Y(!1),console.error("Error fetching data:",t)}finally{Y(!1)}},options:[{value:"",label:"Ticket No"},...H.map((e=>({value:e.ticketNo,label:e.ticketNo})))]})}),(0,R.jsx)(N.Ay,{item:!0,lg:8,sm:3,children:(0,R.jsx)(y.A,{display:"flex",justifyContent:"flex-end",children:(0,R.jsx)(d.Ay,{type:"primary",icon:(0,R.jsx)(v.A,{}),style:{height:"33px"},onClick:()=>(console.log("create"),void $(!0)),children:"Create New Ticket"})})})]})})}),(0,R.jsx)(h.A,{className:"table-hd table-asset-creation",columns:xe,dataSource:ce,pagination:!1,loading:K,showSorterTooltip:!1}),(0,R.jsx)("div",{className:"align-center-data",children:(0,R.jsx)(b.A,{defaultCurrent:O,total:L,current:O,pageSize:V,onChange:(e,s)=>{F(e),_(s),re(e,s)},hideOnSinglePage:!0})}),(0,R.jsx)(W,{isModalOpen:X,setIsModalOpen:$}),(0,R.jsx)(M,{AssetTicket:te,StatusType:le,isEditModalOpen:ee,setIsEditModalOpen:se})]})};var _=t(96032);const P=()=>(0,R.jsx)(_.A,{children:(0,R.jsx)(a.A,{sx:{height:"100%",width:"100%",overflow:"auto",boxShadow:"none",borderRadius:"10px"},children:(0,R.jsx)(V,{})})})}}]);